<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery-dateFormat/1.0/jquery.dateFormat.js">
    </script>
    <title>Message Feed</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Lobster">

  </head>
  <body>

    <div class = "nav-bar">
     <a href="feed.html">FEED</a>
     <a href ="index.html">INDEX</a>
     <a href="post.html">POST</a>
     </div>

    <h1 class="title">Message Feed</h1>
    <div class="message-list">
    </div>
    <script>

//Hello! This is the start of the JavaScript.

var displayMessage = function(post) {
  var postElement = $('<div class="post"></div>');
  $(".message-list").append(postElement);

  var messageElement = $('<div class="message">' + post.message  +'</div>');
  postElement.append(messageElement);
  var imageElement = $('<img class = "size" src="'+post.image+'">');
  postElement.append(imageElement);
  var timeElement = $('<div class="time">' + $.format.prettyDate(post.time) + '</div>');
  postElement.append(timeElement);
  var authorElement = $('<div>' + post.author + '</div>');
postElement.append(authorElement);
var idElement = $('<div class ="id">' + post.id + '</div>');
postElement.append(idElement);
var replyElement = $('<div class="reply">'+ '<input type="text" name="reply" placeholder="reply goes here" class="replyInput"> <button class="ReplyButton">Reply to post!</button>' + '</div>');
postElement.append(replyElement);
var postComment = function () {
   alert("post id: " + post.id + ", my comment: " + postElement.find("input").val());
  }
  postElement.find("button").click(postComment);
}


var createFeed = function(data) {
  data.reverse();
  data.forEach(displayMessage);
}

$.get("/posts", createFeed);

//This is the end of the JavaScript.
    </script>
  </body>
</html>
